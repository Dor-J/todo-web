<section class="space-y-6 animate-pop">
  <div
    class="space-y-4 rounded-3xl border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 p-4 shadow-lg shadow-slate-900/5 dark:shadow-slate-950/20 backdrop-blur sm:p-6"
  >
    <div class="flex flex-col gap-4 md:flex-row md:items-stretch">
      <app-todo-filters
        class="md:w-2/5 md:h-full"
        [filters]="filters()"
        (filtersChange)="handleFiltersChange($event)"
      />
      <app-todo-stats
        class="md:flex-1 md:h-full"
        [total]="stats().total"
        [completed]="stats().completed"
        [remaining]="stats().remaining"
      />
    </div>

    <app-todo-form (save)="handleCreate($event)" />
  </div>

  @if (error()) {
  <app-error-banner [message]="error()" (dismiss)="dismissError()" />
  }

  <div class="relative">
    <app-loading-overlay [isLoading]="loading()" />
    <app-todo-list
      [todos]="filteredTodos()"
      (toggleTodo)="handleToggle($event)"
      (editTodo)="handleEdit($event)"
      (deleteTodo)="handleDelete($event)"
      (toggleStarred)="handleToggleStarred($event)"
    />
  </div>

  <app-todo-edit-modal [todo]="editingTodo()" (dismiss)="dismissEdit()" (save)="saveEdit($event)" />
</section>
